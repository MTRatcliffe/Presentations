<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Computational Vision</title>

		<meta name="description" content="A Slide Deck For Nove Hardy Presentation">
		<meta name="author" content="M T Ratcliffe">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
        <link rel="icon" type="image/png" href="Images/logo.png">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>


		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Computer Vision</h1>

							<img width="200" height="200" type="image/png" src="Images/QR.png" alt="Up arrow" >
					
<p class="fragment fade-up">¯\_(ツ)_/¯</p>
					<h3>Making a Camera a usefull tool</h3>
					<p>
						<small>Created by <a href="http://michaelratcliffe.com" target="_blank">Michael Ratcliffe</a> for <a href="http://www.auc.cz/ "target="_blank">the University Center of Nove Hrady</a></small>
					</p>
				</section>

				<section>
					<h2>Hello There</h2>
					
						<p class="fragment shrink">About me: Acreddited Engineer and Farmer from Manchester United Kingdom..... Many Hats Depending On the Day </p>
                      
						
                            <br>
                        
	                        <span class="fragment fade-in">
		                        <p>Things I Like: <span class="fragment highlight-red">Coffee</span>, Coding, Automation, Farming, Pingpong </span> </p>
	                        </span>

                                <br>
                                 <span class="fragment fade-in">
                                <p> <span class="fragment highlight-red">*Things im good at </span></p>
                                </span>
                                                       
						
    
	
				</section>

				<!-- Example of nested vertical slides -->
				<section>
					<section>
						<h2>Project outline</h2>
					    <p class="fragment shrink">Create a photo-chamber [*Fancy Box] that we can put items inside take a picture or two, get out true color and dimensions of object</p>
						<p class="fragment fade-in">Our item will be fish</p>
						
<span class="fragment fade-in">
						<table>
						<thead>
							<tr>
								<th>Measurment</th>
								<th>Calibrate</th>
								
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Color</td>
								<td>Intensity, White Ballance </td>
								
							</tr>
							<tr>
								<td>Size</td>
								<td>pixel position to mm</td>
							
							</tr>
							<tr>
								<td>General</td>
								<td>Maximise range, find dead pixels etc</td>
								
							</tr>
						</tbody>
					</table>
</span>
					</section>
					<section>
						<h2>Reducing the Complexity</h2>
						<p>By putting the thing of Interest in a box we can:
<br>
-Remove outside light interferance <p class="fragment fade-in"> Easier to Calibrate and process images </p>

-Control the spectrum of light <p class="fragment fade-in"> See frequency specific data [ie UV, IR] from same camera</p>

</p>
	
					</section>
					<section>
						<h2>Why is it useful to know these things:</h2>
						<p class="fragment fade-in">The color of and size of fish are useful to the practitionor for:</p>
<p class="fragment fade-in">-Product pricing</p>
<p class="fragment fade-in">-Quality control

</p>
<p class="fragment fade-in">-Reduce the time, skill and knowledge demands for scientist and farmers</p>
						
					</section>
				</section>

				

				

				

				<section>
	<section>
					<h2>How a Camera Works</h2>
						
<span class="fragment fade-in">

<img width="450" height="300"  src="Images/raw.jpg" alt="Up arrow" >
<img width="450" height="300" src="Images/wb.jpg" alt="Up arrow" >

</span>
<p><span class="fragment">Change ISO, gains etc... Read Sensor... Apply auto ballance... Save image in 8bit format </span>
						<br>
                             <span class="fragment">Great for capturing moments</span> 
                            <span class="fragment">....Bad for Using in science</span></p>

						
				</section>

	<section>
					<h2>Lets make it more useful</h2>

<p><span class="fragment"> Set steady light conditions.. </span>
						<br>
                             <span class="fragment">make the camera dumb and capture raw image</span> 
                            

						
				</section>

<section>
<h2>Setting the basics</h2>

<p class="fragment shrink"> Turn all the fancy automatic stuff off <a href="https://picamera.readthedocs.io/en/release-1.13/api_camera.html" target="_blank">[More Info]</a></p>
<span class="fragment shrink">


<pre><code class="hljs" data-trim contenteditable>
#Basic.py
#!/usr/bin/python
import picamera
camera = PiCamera()
camera.iso =100
camera.shutter_speed =20000  
camera.awb_mode = 1,1 
camera.capture(Directoiry/Filename.jpg, bayer=True)
					</code></pre>

</span>

<span class="fragment fade-in">
<img width="300" height="200"  src="Images/raw.jpg" alt="Up arrow" >
</span>

</section>

	<section>
					<h2>Cool now we have a raw Image</h2>


<img width="300" height="200"  src="Images/raw.jpg" alt="Up arrow" >
<img width="300" height="200"  src="Images/fullhist1.png" alt="Up arrow" >
<img width="300" height="200"  src="Images/fullhist2.png" alt="Up arrow" >

						
				</section>
<section>
					<h2>White ballancing </h2>
<p><a href="https://www.mathworks.com/help/images/examples/comparison-of-auto-white-balance-algorithms.html" target="_blank">[More Info]</a></p>


<img width="300" height="200"  src="Images/raw.jpg" alt="Up arrow" >
<img width="300" height="200"  src="Images/Roi.jpg" alt="Up arrow" >
<img width="300" height="200"  src="Images/rawhist.png" alt="Up arrow" >
</span>


<span class="fragment fade-in">
<img width="300" height="200"  src="Images/wbhistA.png" alt="Up arrow" >
<img width="300" height="200"  src="Images/RoiwA.jpg" alt="Up arrow" >
<img width="300" height="200"  src="Images/wbA.jpg" alt="Up arrow" >	
</span>					
				</section>
<section>
					<h2>Hold on a moment </h2>
<p><a href="https://www.mathworks.com/help/images/examples/comparison-of-auto-white-balance-algorithms.html" target="_blank">[More Info]</a></p>


<img width="300" height="200"  src="Images/raw.jpg" alt="Up arrow" >
<img width="300" height="200"  src="Images/Roi.jpg" alt="Up arrow" >
<img width="300" height="200"  src="Images/rawhist.png" alt="Up arrow" >

<span class="fragment fade-in">
<img width="300" height="200"  src="Images/wbhistW.png" alt="Up arrow" >
<img width="300" height="200"  src="Images/RoiW.jpg" alt="Up arrow" >
<img width="300" height="200"  src="Images/wbW.jpg" alt="Up arrow" >	
</span>					
				</section>
<section>
<h2>A better Solution</h2>

<p class="fragment shrink"> Change the gain settings on the camera</p>
<span class="fragment shrink">
<p class="fragment shrink"> Brute Force: Take many images and change gains for next image untill happy</p>


<pre><code class="hljs" data-trim contenteditable>
#Basic.py
#!/usr/bin/python

while abs(r - g) > 0.05 or abs(b - g) > 0.05 or i<10:
        # average R, G, and B values
        camera.capture(output, format='rgb', resize=(128, 72), use_video_port=True)
        r, g, b = (np.mean(output.array[..., i]) for i in range(3))
        print('R:%5.2f, B:%5.2f = (%5.2f, %5.2f, %5.2f)' % ( rg, bg, r, g, b))
        # Adjust R and B relative to G, but only if they're significantly
        # different (delta +/- 2)
        if abs(r - g) > 0.02:
            if r > g:
                rg -= 0.01
            else:
                rg += 0.01
        if abs(b - g) > 0.02:
            if b > g:
                bg -= 0.01
            else:
                bg += 0.01
        camera.awb_gains = (rg, bg)
        output.seek(0)
        output.truncate()
        i+=1
					</code></pre>

</section>

<section>

<img width="300" height="180"  src="Images/raw.jpg" alt="Up arrow" >
<img width="300" height="180"  src="Images/Roi.jpg" alt="Up arrow" >
<img width="300" height="180"  src="Images/rawhist.png" alt="Up arrow" >

<img width="300" height="180"  src="Images/wbhistW.png" alt="Up arrow" >
<img width="300" height="180"  src="Images/RoiW.jpg" alt="Up arrow" >
<img width="300" height="180"  src="Images/wbW.jpg" alt="Up arrow" >	

<img width="300" height="180"  src="Images/rawB.jpg" alt="Up arrow" >
<img width="300" height="180"  src="Images/RoiB.jpg" alt="Up arrow" >
<img width="300" height="180"  src="Images/rawhistB.png" alt="Up arrow" >
				</section>

<section>


<img width="900" height="480"  src="Images/rawB.jpg" alt="Up arrow" >

				</section>

				</section>
</section>
 
				<section style="text-align: left; middle;" id="End">
                
					<h1>THE END</h1>
					<p><span class="fragment">Things Left To Do... </span>
<p><span class="fragment">-Confirm Color is measured to spec </span>
<p><span class="fragment">-Decide how to Calibrate for noisy UV light source </span>
<p><span class="fragment">-Documentation and poster </span>
				</section>


				<section style="text-align: left;"id="QA">
					<h1>Questions</h1>
					<p>
					    <a href="https://aquaponicslab.org">-Questions Please?</a> <br>
						<a href="https://google.com">-Photo Chamber Source code &amp; documentation</a>

							<img width="358" height="238" type="image/png" src="Images/contact.png" alt="Up arrow" >
<img width="238" height="238" type="image/png" src="Images/QR.png" alt="Up arrow" >
					
					</p>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/search/search.js', async: true },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>

<!--
Useful 
Snippets 
<p>There's different types of fragments, like:</p>
						<p class="fragment grow">grow</p>
						<p class="fragment shrink">shrink</p>
						<p class="fragment fade-in">fade-out</p>
						<p class="fragment fade-up">fade-up (also down, left and right!)</p>
						<p class="fragment current-visible">current-visible</p>

<!-- Hacks to swap themes after the page has loaded. Not flexible and only intended for the reveal.js demo deck. 
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/black.css'); return false;">Black (default)</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/white.css'); return false;">White</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/league.css'); return false;">League</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/sky.css'); return false;">Sky</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/beige.css'); return false;">Beige</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/simple.css'); return false;">Simple</a> <br>
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/serif.css'); return false;">Serif</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/blood.css'); return false;">Blood</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/night.css'); return false;">Night</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/moon.css'); return false;">Moon</a> -
						<a href="#" onclick="document.getElementById('theme').setAttribute('href','css/theme/solarized.css'); return false;">Solarized</a>
